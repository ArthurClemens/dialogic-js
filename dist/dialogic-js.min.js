"use strict";(()=>{var d=t=>new Promise(e=>setTimeout(e,t)),S=(t,e)=>e.reduce((n,o)=>n!=="0s"?n:t.getPropertyValue(o),"0s"),f=({domElement:t,props:e})=>{let n=document.defaultView;if(n){let o=n.getComputedStyle(t);if(o)return S(o,e)}},y=t=>{let e=parseFloat(t)*(t.indexOf("ms")===-1?1e3:1);return Number.isNaN(e)?0:e},l=t=>{let e=f({domElement:t,props:["animation-duration","transition-duration"]}),n=e!==void 0?y(e):0,o=f({domElement:t,props:["animation-delay","transition-delay"]}),a=o!==void 0?y(o):0;return n+a},g=t=>t.scrollTop,T=t=>{let e=window.getComputedStyle(t);return e.opacity==="0"||e.display==="none"?!1:!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)};var P="[data-prompt]",C="[data-content]",b="[data-touch]",h="[data-toggle]",v="ismodal",A="isescapable",M="isopen",w="isshowing",L="ishiding",r="islocked",_=300;var c=async({content:t,root:e,isDetails:n,isEscapable:o,escapeListener:a})=>{if(e.dataset[r]!==void 0)return;delete e.dataset[w],e.dataset[L]="";let s=l(t);await d(s),n&&e.removeAttribute("open"),delete e.dataset[L],delete e.dataset[M]},u=async({content:t,root:e,isDetails:n,isEscapable:o,escapeListener:a})=>{if(e.dataset[r]!==void 0)return;e.dataset[r]="",setTimeout(()=>{e&&delete e.dataset[r]},_),o&&window.addEventListener("keydown",a,{once:!0}),n&&e.setAttribute("open",""),e.dataset[M]="",g(e),e.dataset[w]="";let s=l(t);await d(s)},m=async(t,e=2)=>{switch(e){case 0:return await u(t);case 1:return await c(t);default:return T(t.content)?await c(t):await u(t)}};function I(t,e){let n=null;if(!e&&t?n=t:typeof e=="string"?n=document.querySelector(e):e&&!!e.tagName&&(n=e.closest(P)),!n){console.error("Prompt element 'data-root' not found");return}let o=n.querySelector(C);if(!o){console.error("Prompt element 'data-content' not found");return}let a=n.querySelector(h)||n.querySelector("summary"),s=n.querySelector(b),p=n.tagName==="DETAILS",H=n.dataset[v]!==void 0,D=n.dataset[A]!==void 0,E={root:n,isDetails:p,isModal:H,isEscapable:D,toggle:a,content:o,touchLayer:s,escapeListener:function(O){O.key==="Escape"&&c(E)}};return E}var V=t=>{let{toggle:e}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",async n=>{n.preventDefault(),n.stopPropagation(),m(t)}),e.dataset.registered="")},N=t=>{let{touchLayer:e,isModal:n}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",async o=>{o.stopPropagation(),n||m(t,1)}),e.dataset.registered="")},G=t=>{let{content:e}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",async n=>{n.stopPropagation()}),e.dataset.registered="")};async function i(t,e,n){let o=I(t.el,e);if(o===void 0)return;V(o),N(o),G(o);let{root:a,isDetails:s}=o;s&&a.getAttribute("open")!==null&&n!==1&&u(o),n!==void 0&&await m(o,n)}var x={mounted(){i(this)},async init(t){await i(this,t)},async toggle(t){await i(this,t,2)},async show(t){await i(this,t,0)},async hide(t){await i(this,t,1)}};window.Prompt=x;})();
