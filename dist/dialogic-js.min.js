"use strict";(()=>{var _=Object.defineProperty,x=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var M=(e,t,n)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b=(e,t)=>{for(var n in t||(t={}))N.call(t,n)&&M(e,n,t[n]);if(H)for(var n of H(t))k.call(t,n)&&M(e,n,t[n]);return e},S=(e,t)=>x(e,V(t));var p=e=>new Promise(t=>setTimeout(t,e)),G=(e,t)=>t.reduce((n,o)=>n!=="0s"?n:e.getPropertyValue(o),"0s"),w=({domElement:e,props:t})=>{let n=document.defaultView;if(n){let o=n.getComputedStyle(e);if(o)return G(o,t)}},O=e=>{let t=parseFloat(e)*(e.indexOf("ms")===-1?1e3:1);return Number.isNaN(t)?0:t},f=e=>{let t=w({domElement:e,props:["animation-duration","transition-duration"]}),n=t!==void 0?O(t):0,o=w({domElement:e,props:["animation-delay","transition-delay"]}),s=o!==void 0?O(o):0;return n+s},D=e=>e.scrollTop,h=e=>{let t=window.getComputedStyle(e);return t.opacity==="0"||t.display==="none"?!1:!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},R=(e,t)=>e instanceof HTMLAnchorElement&&e.rel!=="ignore"||e instanceof HTMLAreaElement&&e.href!==void 0||[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement].some(n=>e instanceof n)&&!e.disabled||e instanceof HTMLIFrameElement||e.tabIndex>0||!t&&e.tabIndex===0&&e.getAttribute("tabindex")!==null&&e.getAttribute("aria-hidden")!=="true",A=e=>[].slice.call(e.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter(n=>R(n,!0)).sort((n,o)=>n.tabIndex-o.tabIndex)[0];var P="[data-prompt]",q="[data-content]",W="[data-touch]",K="[data-toggle]",U="ismodal",B="isescapable",$="isfocusfirst",j="focusfirst",y="isopen",C="isshowing",I="ishiding",c="islocked",z=300,T=async(e,t={})=>{let{content:n,root:o,isDetails:s,isEscapable:i,escapeListener:a}=e;if(o.dataset[c]!==void 0&&!t.isIgnoreLockDuration)return;t.willHide&&t.willHide(e),delete o.dataset[C],o.dataset[I]="";let r=f(n);await p(r),s&&o.removeAttribute("open"),delete o.dataset[I],delete o.dataset[y],t.didHide&&t.didHide(e),i&&window.removeEventListener("keydown",a)},L=async(e,t={})=>{let{content:n,root:o,isDetails:s,isEscapable:i,isFocusFirst:a,focusFirstSelector:r,escapeListener:u}=e;if(o.dataset[c]!==void 0)return;o.dataset[c]="",setTimeout(()=>{o&&delete o.dataset[c]},z),i&&window.addEventListener("keydown",u),s&&o.setAttribute("open",""),o.dataset[y]="",D(o),o.dataset[C]="",t.willShow&&t.willShow(e);let m=f(n);if(await p(m),a){let l=A(n);l&&l.focus()}else if(r){let l=n.querySelector(r);l&&l.focus()}t.didShow&&t.didShow(e)},g=async(e,t=2,n)=>{switch(t){case 0:return await L(e,n);case 1:return await T(e,n);default:return h(e.content)?await T(e,n):await L(e,n)}};function J(e,t,n){let o=null;if(!t&&e?o=e:typeof t=="string"?o=document.querySelector(t):t&&t.tagName&&(o=t.closest(P)),!o){console.error("Prompt element 'data-root' not found");return}let s=o.querySelector(q);if(!s){console.error("Prompt element 'data-content' not found");return}let i=o.querySelector(K)||o.querySelector("summary"),a=o.querySelector(W),r=o.tagName==="DETAILS",u=o.dataset[U]!==void 0,m=o.dataset[B]!==void 0,l=o.dataset[$]!==void 0,v=o.dataset[j],E={root:o,isDetails:r,isModal:u,isEscapable:m,isFocusFirst:l,focusFirstSelector:v,toggle:i,content:s,touchLayer:a,escapeListener:function(F){F.key==="Escape"&&[].slice.call(document.querySelectorAll(`${P}[data-${y}]`)).reverse()[0]===E.root&&T(E,S(b({},n),{isIgnoreLockDuration:!0}))}};return E}var Q=e=>{let{toggle:t}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async n=>{n.preventDefault(),n.stopPropagation(),g(e)}),t.dataset.registered="")},X=e=>{let{touchLayer:t,isModal:n}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async o=>{o.stopPropagation(),n||g(e,1)}),t.dataset.registered="")},Y=e=>{let{content:t}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async n=>{n.stopPropagation()}),t.dataset.registered="")};async function d(e,t,n,o){let s=J(e.el,t,n);if(s===void 0)return;Q(s),X(s),Y(s);let{root:i,isDetails:a}=s;a&&i.getAttribute("open")!==null&&o!==1&&L(s,n),o!==void 0&&await g(s,o,n)}var Z={mounted(){d(this)},async init(e,t){await d(this,e,t)},async toggle(e,t){await d(this,e,t,2)},async show(e,t){await d(this,e,t,0)},async hide(e,t){await d(this,e,t,1)}};window.Prompt=Z;})();
