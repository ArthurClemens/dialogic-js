"use strict";(()=>{var l=t=>new Promise(e=>setTimeout(e,t)),M=(t,e)=>e.reduce((n,a)=>n!=="0s"?n:t.getPropertyValue(a),"0s"),m=({domElement:t,props:e})=>{let n=document.defaultView;if(n){let a=n.getComputedStyle(t);if(a)return M(a,e)}},y=t=>{let e=parseFloat(t)*(t.indexOf("ms")===-1?1e3:1);return Number.isNaN(e)?0:e},d=t=>{let e=m({domElement:t,props:["animation-duration","transition-duration"]}),n=e!==void 0?y(e):0,a=m({domElement:t,props:["animation-delay","transition-delay"]}),o=a!==void 0?y(a):0;return n+o};var w={mounted(){s(this)},async init(t){await s(this,t)},async toggle(t){await s(this,t,i.TOGGLE)},async show(t){await s(this,t,i.SHOW)},async hide(t){await s(this,t,i.HIDE)}},H="[data-prompt]",S="[data-pane]",P="[data-touch]",h="[data-toggle]",D="ismodal",g="isopen",T="isshowing",E="ishiding",i=(a=>(a[a.SHOW=0]="SHOW",a[a.HIDE=1]="HIDE",a[a.TOGGLE=2]="TOGGLE",a))(i||{});function O(t,e){let n=null;if(!e&&t.el?n=t.el:typeof e=="string"?n=document.querySelector(e):e&&!!e.tagName&&(n=e.closest(H)),!n)return;let a=n.querySelector(h)||n.querySelector("summary"),o=n.querySelector(S),r=n.querySelector(P),p=n.tagName==="DETAILS",L=n.dataset[D]!==void 0;if(n&&o)return{root:n,isDetails:p,isModal:L,toggle:a,pane:o,touchLayer:r}}async function s(t,e,n){let a=O(t,e);if(a===void 0){console.error("Prompt elements not found");return}b(a),C(a);let{root:o,isDetails:r}=a;r&&o.getAttribute("open")!==null&&u(a),n!==void 0&&await c(a,n)}var b=t=>{let{toggle:e}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",async n=>{n.preventDefault(),n.stopPropagation(),c(t)}),e.dataset.registered="")},C=t=>{let{touchLayer:e,isModal:n}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",async a=>{a.preventDefault(),a.stopPropagation(),n||c(t,1)}),e.dataset.registered="")},A=t=>t.scrollTop,u=async({pane:t,root:e,isDetails:n})=>{n&&e.setAttribute("open",""),e.dataset[g]="",A(e),e.dataset[T]="";let a=d(t);await l(a)},f=async({pane:t,root:e,isDetails:n})=>{delete e.dataset[T],e.dataset[E]="";let a=d(t);await l(a),n&&e.removeAttribute("open"),delete e.dataset[E],delete e.dataset[g]},V=t=>{let e=window.getComputedStyle(t);return e.opacity==="0"||e.display==="none"?!1:!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},c=async(t,e=2)=>{switch(e){case 0:return await u(t);case 1:return await f(t);default:return V(t.pane)?await f(t):await u(t)}};window.Prompt=w;})();
