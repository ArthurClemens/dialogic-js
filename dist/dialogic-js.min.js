"use strict";(()=>{var F=Object.defineProperty,_=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var H=(e,t,n)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M=(e,t)=>{for(var n in t||(t={}))V.call(t,n)&&H(e,n,t[n]);if(g)for(var n of g(t))N.call(t,n)&&H(e,n,t[n]);return e},b=(e,t)=>_(e,x(t));var E=e=>new Promise(t=>setTimeout(t,e)),k=(e,t)=>t.reduce((n,o)=>n!=="0s"?n:e.getPropertyValue(o),"0s"),S=({domElement:e,props:t})=>{let n=document.defaultView;if(n){let o=n.getComputedStyle(e);if(o)return k(o,t)}},w=e=>{let t=parseFloat(e)*(e.indexOf("ms")===-1?1e3:1);return Number.isNaN(t)?0:t},f=e=>{let t=S({domElement:e,props:["animation-duration","transition-duration"]}),n=t!==void 0?w(t):0,o=S({domElement:e,props:["animation-delay","transition-delay"]}),s=o!==void 0?w(o):0;return n+s},O=e=>e.scrollTop,D=e=>{let t=window.getComputedStyle(e);return t.opacity==="0"||t.display==="none"?!1:!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},G=(e,t)=>e instanceof HTMLAnchorElement&&e.rel!=="ignore"||e instanceof HTMLAreaElement&&e.href!==void 0||[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement].some(n=>e instanceof n)&&!e.disabled||e instanceof HTMLIFrameElement||e.tabIndex>0||!t&&e.tabIndex===0&&e.getAttribute("tabindex")!==null&&e.getAttribute("aria-hidden")!=="true",h=e=>[].slice.call(e.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter(n=>G(n,!0)).sort((n,o)=>n.tabIndex-o.tabIndex)[0];var R="[data-prompt]",q="[data-content]",W="[data-touch]",K="[data-toggle]",U="ismodal",B="isescapable",j="isfocusfirst",z="focusfirst",P="isopen",I="isshowing",A="ishiding",c="islocked",J=300,T=async(e,t={})=>{let{content:n,root:o,isDetails:s,isEscapable:i,escapeListener:a}=e;if(o.dataset[c]!==void 0&&!t.isIgnoreLockDuration)return;t.willHide&&t.willHide(e),delete o.dataset[I],o.dataset[A]="";let r=f(n);await E(r),s&&o.removeAttribute("open"),delete o.dataset[A],delete o.dataset[P],t.didHide&&t.didHide(e),i&&window.removeEventListener("keydown",a)},L=async(e,t={})=>{let{content:n,root:o,isDetails:s,isEscapable:i,isFocusFirst:a,focusFirstSelector:r,escapeListener:u}=e;if(o.dataset[c]!==void 0)return;t.willShow&&t.willShow(e),o.dataset[c]="",setTimeout(()=>{o&&delete o.dataset[c]},J),i&&window.addEventListener("keydown",u),s&&o.setAttribute("open",""),o.dataset[P]="",O(o),o.dataset[I]="";let m=f(n);if(await E(m),a){let l=h(n);l&&l.focus()}else if(r){let l=n.querySelector(r);l&&l.focus()}t.didShow&&t.didShow(e)},y=async(e,t=2,n)=>{switch(t){case 0:return await L(e,n);case 1:return await T(e,n);default:return D(e.content)?await T(e,n):await L(e,n)}};function Q(e,t,n){let o=null;if(!t&&e?o=e:typeof t=="string"?o=document.querySelector(t):t&&t.tagName&&(o=t.closest(R)),!o){console.error("Prompt element 'data-root' not found");return}let s=o.querySelector(q);if(!s){console.error("Prompt element 'data-content' not found");return}let i=o.querySelector(K)||o.querySelector("summary"),a=o.querySelector(W),r=o.tagName==="DETAILS",u=o.dataset[U]!==void 0,m=o.dataset[B]!==void 0,l=o.dataset[j]!==void 0,C=o.dataset[z],p={root:o,isDetails:r,isModal:u,isEscapable:m,isFocusFirst:l,focusFirstSelector:C,toggle:i,content:s,touchLayer:a,escapeListener:function(v){v.key==="Escape"&&[].slice.call(document.querySelectorAll("[data-prompt][data-isopen]")).reverse()[0]===p.root&&T(p,b(M({},n),{isIgnoreLockDuration:!0}))}};return p}var X=e=>{let{toggle:t}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async n=>{n.preventDefault(),n.stopPropagation(),y(e)}),t.dataset.registered="")},Y=e=>{let{touchLayer:t,isModal:n}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async o=>{o.stopPropagation(),n||y(e,1)}),t.dataset.registered="")},Z=e=>{let{content:t}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async n=>{n.stopPropagation()}),t.dataset.registered="")};async function d(e,t,n,o){let s=Q(e.el,t,n);if(s===void 0)return;X(s),Y(s),Z(s);let{root:i,isDetails:a}=s;a&&i.getAttribute("open")!==null&&o!==1&&L(s,n),o!==void 0&&await y(s,o,n)}var $={mounted(){d(this)},async init(e,t){await d(this,e,t)},async toggle(e,t){await d(this,e,t,2)},async show(e,t){await d(this,e,t,0)},async hide(e,t){await d(this,e,t,1)}};window.Prompt=$;})();
