"use strict";(()=>{var N=Object.defineProperty,R=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var b=(e,t,n)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))q.call(t,n)&&b(e,n,t[n]);if(S)for(var n of S(t))U.call(t,n)&&b(e,n,t[n]);return e},D=(e,t)=>R(e,G(t));var T=e=>new Promise(t=>setTimeout(t,e)),W=(e,t)=>t.reduce((n,o)=>n!=="0s"?n:e.getPropertyValue(o),"0s"),H=({domElement:e,props:t})=>{let n=document.defaultView;if(n){let o=n.getComputedStyle(e);if(o)return W(o,t)}},O=e=>{let t=parseFloat(e)*(e.indexOf("ms")===-1?1e3:1);return Number.isNaN(t)?0:t},y=e=>{let t=H({domElement:e,props:["animation-duration","transition-duration"]}),n=t!==void 0?O(t):0,o=H({domElement:e,props:["animation-delay","transition-delay"]}),s=o!==void 0?O(o):0;return n+s},C=e=>e.scrollTop,A=e=>{let t=typeof window<"u"?window.getComputedStyle(e):{};return t.opacity==="0"||t.display==="none"?!1:!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},K=(e,t)=>e instanceof HTMLAnchorElement&&e.rel!=="ignore"||e instanceof HTMLAreaElement&&e.href!==void 0||[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement].some(n=>e instanceof n)&&!e.disabled||e instanceof HTMLIFrameElement||e.tabIndex>0||!t&&e.tabIndex===0&&e.getAttribute("tabindex")!==null&&e.getAttribute("aria-hidden")!=="true",v=e=>[].slice.call(e.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter(n=>K(n,!0)).sort((n,o)=>n.tabIndex-o.tabIndex)[0],I=(e,t,n)=>{t&&(e[t]||(e[t]=JSON.stringify(n)))},_=(e,t)=>{if(t)return JSON.parse(e[t])},L=(e,t)=>{t&&delete e[t]},P=(e,t)=>{!t||!e||Object.keys(e).forEach(n=>{t.dataset[n]=e[n]})};var x="[data-prompt]",B="[data-content]",J="[data-touch]",$="[data-toggle]",j="ismodal",z="isescapable",Q="isfocusfirst",X="focusfirst",w="isopen",k="isshowing",F="ishiding",p="islocked",Y=300,g=async(e,t={})=>{let{content:n,root:o,isDetails:s,isEscapable:a,escapeListener:i}=e;if(o.dataset[p]!==void 0&&!t.isIgnoreLockDuration)return;t.willHide&&t.willHide(e),delete o.dataset[k],o.dataset[F]="";let r=y(n);await T(r),s&&o.removeAttribute("open"),delete o.dataset[F],delete o.dataset[w],t.didHide&&t.didHide(e),a&&typeof window<"u"&&window.removeEventListener("keydown",i)},M=async(e,t={})=>{let{content:n,root:o,isDetails:s,isEscapable:a,isFocusFirst:i,focusFirstSelector:r,escapeListener:u}=e;if(o.dataset[p]!==void 0)return;o.dataset[p]="",setTimeout(()=>{o&&delete o.dataset[p]},Y),a&&typeof window<"u"&&window.addEventListener("keydown",u),s&&o.setAttribute("open",""),o.dataset[w]="",C(o),o.dataset[k]="",t.willShow&&t.willShow(e);let E=y(n);if(await T(E),i){let c=v(n);c&&c.focus()}else if(r){let c=n.querySelector(r);c&&c.focus()}t.didShow&&t.didShow(e)},h=async(e,t=2,n)=>{switch(t){case 0:return await M(e,n);case 1:return await g(e,n);default:return A(e.content)?await g(e,n):await M(e,n)}},Z=(e,t,n)=>{let o=null;if(!t&&e?o=e:typeof t=="string"?o=document.querySelector(t):t&&t.tagName&&(o=t.closest(x)),!o){console.error("Prompt element 'data-root' not found");return}let s=o.querySelector(B);if(!s){console.error("Prompt element 'data-content' not found");return}let a=o.querySelector($)||o.querySelector("summary"),i=o.querySelector(J),r=o.tagName==="DETAILS",u=o.dataset[j]!==void 0,E=o.dataset[z]!==void 0,c=o.dataset[Q]!==void 0,V=o.dataset[X],l={root:o,isDetails:r,isModal:u,isEscapable:E,isFocusFirst:c,focusFirstSelector:V,toggle:a,content:s,touchLayer:i,escapeListener:function(d){d.key==="Escape"&&[].slice.call(document.querySelectorAll(`${x}[data-${w}]`)).reverse()[0]===l.root&&g(l,D(f({},n),{isIgnoreLockDuration:!0}))},clickTouchLayerListener:function(d){d.target===i&&(d.stopPropagation(),u||h(l,1,n))},clickToggleListener:function(d){d.preventDefault(),d.stopPropagation(),h(l,void 0,n)}};return l},ee=e=>{let{toggle:t,clickToggleListener:n}=e;t&&t.dataset.registered!==""&&(t.addEventListener("click",n),t.dataset.registered="")},te=e=>{let{clickTouchLayerListener:t,touchLayer:n}=e;n&&n.dataset.registered!==""&&(n.addEventListener("click",t),n.dataset.registered="")};async function m(e,t,n,o){e.options=f(f({},e.options),n);let s=Z(e.el,t,e.options);if(s===void 0)return;e.el||(e.el=s==null?void 0:s.root),ee(s),te(s);let{root:a,isDetails:i}=s;i&&a.getAttribute("open")!==null&&o!==1&&M(s,e.options),o!==void 0&&await h(s,o,e.options)}var ne={_cache:{},mounted(){},beforeUpdate(){var e,t;I(this._cache,(e=this.el)==null?void 0:e.id,(t=this.el)==null?void 0:t.dataset)},updated(){var t,n;let e=_(this._cache,(t=this.el)==null?void 0:t.id);P(e,this.el),L(this._cache,(n=this.el)==null?void 0:n.id)},destroyed(){var e;L(this._cache,(e=this.el)==null?void 0:e.id)},async init(e,t){await m(this,e,t)},async toggle(e,t){await m(this,e,t,2)},async show(e,t){await m(this,e,t,0)},async hide(e,t){await m(this,e,t,1)}};typeof window<"u"&&(window.Prompt=ne);})();
