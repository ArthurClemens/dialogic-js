"use strict";(()=>{var d=t=>new Promise(e=>setTimeout(e,t)),w=(t,e)=>e.reduce((n,o)=>n!=="0s"?n:t.getPropertyValue(o),"0s"),p=({domElement:t,props:e})=>{let n=document.defaultView;if(n){let o=n.getComputedStyle(t);if(o)return w(o,e)}},E=t=>{let e=parseFloat(t)*(t.indexOf("ms")===-1?1e3:1);return Number.isNaN(e)?0:e},l=t=>{let e=p({domElement:t,props:["animation-duration","transition-duration"]}),n=e!==void 0?E(e):0,o=p({domElement:t,props:["animation-delay","transition-delay"]}),a=o!==void 0?E(o):0;return n+a};var M={mounted(){i(this)},async init(t){await i(this,t)},async toggle(t){await i(this,t,s.TOGGLE)},async show(t){await i(this,t,s.SHOW)},async hide(t){await i(this,t,s.HIDE)}},H="[data-prompt]",S="[data-pane]",h="[data-touch]",P="[data-toggle]",C="ismodal",g="isopen",T="isshowing",y="ishiding",s=(o=>(o[o.SHOW=0]="SHOW",o[o.HIDE=1]="HIDE",o[o.TOGGLE=2]="TOGGLE",o))(s||{});function D(t,e){let n=null;if(!e&&t.el?n=t.el:typeof e=="string"?n=document.querySelector(e):e&&!!e.tagName&&(n=e.closest(H)),!n)return;let o=n.querySelector(P)||n.querySelector("summary"),a=n.querySelector(S),r=n.querySelector(h),m=n.tagName==="DETAILS",L=n.dataset[C]!==void 0;if(n&&a)return{root:n,isDetails:m,isModal:L,toggle:o,pane:a,touchLayer:r}}async function i(t,e,n){let o=D(t,e);if(o===void 0){console.error("Prompt elements not found");return}O(o),b(o);let{root:a,isDetails:r}=o;r&&a.getAttribute("open")!==null&&u(o),n!==void 0&&await c(o,n)}var O=t=>{let{toggle:e}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",async n=>{n.preventDefault(),n.stopPropagation(),c(t)}),e.dataset.registered="")},b=t=>{let{touchLayer:e,isModal:n}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",async o=>{o.preventDefault(),o.stopPropagation(),n||c(t,1)}),e.dataset.registered="")},v=t=>t.scrollTop,u=async({pane:t,root:e,isDetails:n})=>{n&&e.setAttribute("open",""),e.dataset[g]="",v(e),e.dataset[T]="";let o=l(t);await d(o)},f=async({pane:t,root:e,isDetails:n})=>{delete e.dataset[T],e.dataset[y]="";let o=l(t);await d(o),n&&e.removeAttribute("open"),delete e.dataset[y],delete e.dataset[g]},A=t=>{let e=window.getComputedStyle(t);return e.opacity==="0"||e.display==="none"?!1:!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},c=async(t,e=2)=>{switch(e){case 0:return await u(t);case 1:return await f(t);default:return A(t.pane)?await f(t):await u(t)}};window.Prompt=M;})();
