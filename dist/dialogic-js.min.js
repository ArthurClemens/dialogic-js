"use strict";(()=>{var X=Object.defineProperty,G=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var D=(t,a,e)=>a in t?X(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,s=(t,a)=>{for(var e in a||(a={}))q.call(a,e)&&D(t,e,a[e]);if(P)for(var e of P(a))U.call(a,e)&&D(t,e,a[e]);return t},g=(t,a)=>G(t,B(a));var T=t=>new Promise(a=>setTimeout(a,t)),W=(t,a)=>a.reduce((e,r)=>e!=="0s"?e:t.getPropertyValue(r),"0s"),M=({domElement:t,props:a})=>{let e=document.defaultView;if(e){let r=e.getComputedStyle(t);if(r)return W(r,a)}},x=t=>{let a=parseFloat(t)*(t.indexOf("ms")===-1?1e3:1);return Number.isNaN(a)?0:a},L=t=>{let a=M({domElement:t,props:["animation-duration","transition-duration"]}),e=a!==void 0?x(a):0,r=M({domElement:t,props:["animation-delay","transition-delay"]}),n=r!==void 0?x(r):0;return e+n},A=t=>t.scrollTop,C=t=>{let a=typeof window<"u"?window.getComputedStyle(t):{};return a.opacity==="0"||a.display==="none"?!1:!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},K=(t,a)=>t instanceof HTMLAnchorElement&&t.rel!=="ignore"||t instanceof HTMLAreaElement&&t.href!==void 0||[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement].some(e=>t instanceof e)&&!t.disabled||t instanceof HTMLIFrameElement||t.tabIndex>0||!a&&t.tabIndex===0&&t.getAttribute("tabindex")!==null&&t.getAttribute("aria-hidden")!=="true",I=t=>[].slice.call(t.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter(e=>K(e,!0)).sort((e,r)=>e.tabIndex-r.tabIndex)[0],_=(t,a,e)=>{a&&(t[a]||(t[a]=JSON.stringify(e)))},R=(t,a)=>{if(a)return JSON.parse(t[a])},S=(t,a)=>{a&&delete t[a]},F=(t,a)=>{!a||!t||Object.keys(t).forEach(e=>{a.dataset[e]=t[e]})};var z="[data-prompt]",J="[data-content]",$="[data-touch]",j="[data-toggle]",Y="ismodal",Q="isescapable",Z="isfocusfirst",tt="focusfirst",H="isopen",V="isshowing",N="ishiding",E="islocked",at=300,y={isOpen:!1,willShow:!1,didShow:!1,willHide:!1,didHide:!1},k=async(t,a={})=>{var l,w,u,m;let{prompt:e,content:r,root:n,isDetails:i,isEscapable:p,escapeListener:c}=t;if(n.dataset[E]!==void 0&&!a.isIgnoreLockDuration)return;e.status=g(s({},y),{isOpen:!0,willHide:!0}),(l=a.willHide)==null||l.call(a,t),(w=a.getStatus)==null||w.call(a,e.status),delete n.dataset[V],n.dataset[N]="";let f=L(r);await T(f),i&&n.removeAttribute("open"),delete n.dataset[N],delete n.dataset[H],e.status=g(s({},y),{didHide:!0}),(u=a.getStatus)==null||u.call(a,e.status),(m=a.didHide)==null||m.call(a,t),p&&typeof window<"u"&&window.removeEventListener("keydown",c)},v=async(t,a={})=>{var u,m,d,o;let{prompt:e,content:r,root:n,isDetails:i,isEscapable:p,isFocusFirst:c,focusFirstSelector:f,escapeListener:l}=t;if(n.dataset[E]!==void 0)return;n.dataset[E]="",setTimeout(()=>{n&&delete n.dataset[E]},at),p&&typeof window<"u"&&window.addEventListener("keydown",l),i&&n.setAttribute("open",""),n.dataset[H]="",A(n),n.dataset[V]="",e.status=g(s({},y),{willShow:!0}),(u=a.willShow)==null||u.call(a,t),(m=a.getStatus)==null||m.call(a,e.status);let w=L(r);if(await T(w),c){let h=I(r);h&&h.focus()}else if(f){let h=r.querySelector(f);h&&h.focus()}e.status=g(s({},y),{didShow:!0,isOpen:!0}),(d=a.didShow)==null||d.call(a,t),(o=a.getStatus)==null||o.call(a,e.status)},O=async(t,a=2,e)=>{switch(a){case 0:return await v(t,e);case 1:return await k(t,e);default:return C(t.content)?await k(t,e):await v(t,e)}},et=(t,a,e,r)=>{let n=null;if(!e&&a?n=a:typeof e=="string"?n=document.querySelector(e):e&&e.tagName&&(n=e.closest(z)),!n){console.error("Prompt element 'data-prompt' not found");return}let i=n.querySelector(J);if(!i){console.error("Prompt element 'data-content' not found");return}let p=n.querySelector(j)||n.querySelector("summary"),c=n.querySelector($),f=n.tagName==="DETAILS",l=n.dataset[Y]!==void 0,w=n.dataset[Q]!==void 0,u=n.dataset[Z]!==void 0,m=n.dataset[tt],d={prompt:t,root:n,isDetails:f,isModal:l,isEscapable:w,isFocusFirst:u,focusFirstSelector:m,toggle:p,content:i,touchLayer:c,escapeListener:function(o){o.key==="Escape"&&[].slice.call(document.querySelectorAll("".concat(z,"[data-").concat(H,"]"))).reverse()[0]===d.root&&k(d,g(s({},r),{isIgnoreLockDuration:!0}))},clickTouchLayerListener:function(o){o.target===c&&(o.stopPropagation(),l||O(d,1,r))},clickToggleListener:function(o){o.preventDefault(),o.stopPropagation(),O(d,void 0,r)}};return d},nt=t=>{let{toggle:a,clickToggleListener:e}=t;a&&a.dataset.registered!==""&&(a.addEventListener("click",e),a.dataset.registered="")},rt=t=>{let{clickTouchLayerListener:a,touchLayer:e}=t;e&&e.dataset.registered!==""&&(e.addEventListener("click",a),e.dataset.registered="")};async function b(t,a,e,r){t.options=s(s({},t.options),e);let n=et(t,t.el,a,t.options);if(n===void 0)return;t.el||(t.el=n==null?void 0:n.root),nt(n),rt(n);let{root:i,isDetails:p}=n;p&&i.getAttribute("open")!==null&&r!==1&&v(n,t.options),r!==void 0&&await O(n,r,t.options)}var ot={_cache:{},mounted(){},beforeUpdate(){var t,a;_(this._cache,(t=this.el)==null?void 0:t.id,(a=this.el)==null?void 0:a.dataset)},updated(){var a,e;let t=R(this._cache,(a=this.el)==null?void 0:a.id);F(t,this.el),S(this._cache,(e=this.el)==null?void 0:e.id)},destroyed(){var t;S(this._cache,(t=this.el)==null?void 0:t.id)},status:y,async init(t,a){await b(this,t,a)},async toggle(t,a){await b(this,t,a,2)},async show(t,a){await b(this,t,a,0)},async hide(t,a){await b(this,t,a,1)}};typeof window<"u"&&(window.Prompt=ot);})();
