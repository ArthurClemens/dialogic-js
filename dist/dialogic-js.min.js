"use strict";(()=>{var d=t=>new Promise(e=>setTimeout(e,t)),O=(t,e)=>e.reduce((n,o)=>n!=="0s"?n:t.getPropertyValue(o),"0s"),f=({domElement:t,props:e})=>{let n=document.defaultView;if(n){let o=n.getComputedStyle(t);if(o)return O(o,e)}},y=t=>{let e=parseFloat(t)*(t.indexOf("ms")===-1?1e3:1);return Number.isNaN(e)?0:e},l=t=>{let e=f({domElement:t,props:["animation-duration","transition-duration"]}),n=e!==void 0?y(e):0,o=f({domElement:t,props:["animation-delay","transition-delay"]}),a=o!==void 0?y(o):0;return n+a},T=t=>t.scrollTop,g=t=>{let e=window.getComputedStyle(t);return e.opacity==="0"||e.display==="none"?!1:!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)};var C="[data-prompt]",P="[data-content]",b="[data-touch]",h="[data-toggle]",A="ismodal",v="isescapable",w="isopen",M="isshowing",L="ishiding",r="islocked",_=300;var c=async({content:t,root:e,isDetails:n,isEscapable:o,escapeListener:a})=>{if(e.dataset[r]!==void 0)return;o&&window.addEventListener("keydown",a,{once:!0}),delete e.dataset[M],e.dataset[L]="";let i=l(t);await d(i),n&&e.removeAttribute("open"),delete e.dataset[L],delete e.dataset[w]},u=async({content:t,root:e,isDetails:n,isEscapable:o,escapeListener:a})=>{if(e.dataset[r]!==void 0)return;e.dataset[r]="",setTimeout(()=>{e&&delete e.dataset[r]},_),o&&window.addEventListener("keydown",a,{once:!0}),n&&e.setAttribute("open",""),e.dataset[w]="",T(e),e.dataset[M]="";let i=l(t);await d(i)},m=async(t,e=2)=>{switch(e){case 0:return await u(t);case 1:return await c(t);default:return g(t.content)?await c(t):await u(t)}};function I(t,e){let n=null;if(!e&&t?n=t:typeof e=="string"?n=document.querySelector(e):e&&!!e.tagName&&(n=e.closest(C)),!n){console.error("Prompt element 'data-root' not found");return}let o=n.querySelector(P);if(!o){console.error("Prompt element 'data-content' not found");return}let a=n.querySelector(h)||n.querySelector("summary"),i=n.querySelector(b),p=n.tagName==="DETAILS",H=n.dataset[A]!==void 0,S=n.dataset[v]!==void 0,E={root:n,isDetails:p,isModal:H,isEscapable:S,toggle:a,content:o,touchLayer:i,escapeListener:function(D){D.key==="Escape"&&c(E)}};return E}var V=t=>{let{toggle:e}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",async n=>{n.preventDefault(),n.stopPropagation(),m(t)}),e.dataset.registered="")},N=t=>{let{touchLayer:e,isModal:n}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",async o=>{o.preventDefault(),o.stopPropagation(),n||m(t,1)}),e.dataset.registered="")};async function s(t,e,n){let o=I(t.el,e);if(o===void 0)return;V(o),N(o);let{root:a,isDetails:i}=o;i&&a.getAttribute("open")!==null&&u(o),n!==void 0&&await m(o,n)}var G={mounted(){s(this)},async init(t){await s(this,t)},async toggle(t){await s(this,t,2)},async show(t){await s(this,t,0)},async hide(t){await s(this,t,1)}};window.Prompt=G;})();
