"use strict";(()=>{var _=Object.defineProperty,x=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var M=(e,t,o)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,b=(e,t)=>{for(var o in t||(t={}))N.call(t,o)&&M(e,o,t[o]);if(H)for(var o of H(t))G.call(t,o)&&M(e,o,t[o]);return e},S=(e,t)=>x(e,V(t));var E=e=>new Promise(t=>setTimeout(t,e)),R=(e,t)=>t.reduce((o,n)=>o!=="0s"?o:e.getPropertyValue(n),"0s"),w=({domElement:e,props:t})=>{let o=document.defaultView;if(o){let n=o.getComputedStyle(e);if(n)return R(n,t)}},O=e=>{let t=parseFloat(e)*(e.indexOf("ms")===-1?1e3:1);return Number.isNaN(t)?0:t},f=e=>{let t=w({domElement:e,props:["animation-duration","transition-duration"]}),o=t!==void 0?O(t):0,n=w({domElement:e,props:["animation-delay","transition-delay"]}),s=n!==void 0?O(n):0;return o+s},D=e=>e.scrollTop,h=e=>{let t=window.getComputedStyle(e);return t.opacity==="0"||t.display==="none"?!1:!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k=(e,t)=>e instanceof HTMLAnchorElement&&e.rel!=="ignore"||e instanceof HTMLAreaElement&&e.href!==void 0||[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement].some(o=>e instanceof o)&&!e.disabled||e instanceof HTMLIFrameElement||e.tabIndex>0||!t&&e.tabIndex===0&&e.getAttribute("tabindex")!==null&&e.getAttribute("aria-hidden")!=="true",A=e=>[].slice.call(e.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter(o=>k(o,!0)).sort((o,n)=>o.tabIndex-n.tabIndex)[0];var I="[data-prompt]",q="[data-content]",W="[data-touch]",K="[data-toggle]",U="ismodal",B="isescapable",$="isfocusfirst",j="focusfirst",y="isopen",C="isshowing",P="ishiding",c="islocked",z=300,T=async(e,t={})=>{let{content:o,root:n,isDetails:s,isEscapable:i,escapeListener:a}=e;if(n.dataset[c]!==void 0&&!t.isIgnoreLockDuration)return;t.willHide&&t.willHide(e),delete n.dataset[C],n.dataset[P]="";let r=f(o);await E(r),s&&n.removeAttribute("open"),delete n.dataset[P],delete n.dataset[y],t.didHide&&t.didHide(e),i&&window.removeEventListener("keydown",a)},L=async(e,t={})=>{let{content:o,root:n,isDetails:s,isEscapable:i,isFocusFirst:a,focusFirstSelector:r,escapeListener:u}=e;if(n.dataset[c]!==void 0)return;n.dataset[c]="",setTimeout(()=>{n&&delete n.dataset[c]},z),i&&window.addEventListener("keydown",u),s&&n.setAttribute("open",""),n.dataset[y]="",D(n),n.dataset[C]="",t.willShow&&t.willShow(e);let m=f(o);if(await E(m),a){let l=A(o);l&&l.focus()}else if(r){let l=o.querySelector(r);l&&l.focus()}t.didShow&&t.didShow(e)},g=async(e,t=2,o)=>{switch(t){case 0:return await L(e,o);case 1:return await T(e,o);default:return h(e.content)?await T(e,o):await L(e,o)}};function J(e,t,o){let n=null;if(!t&&e?n=e:typeof t=="string"?n=document.querySelector(t):t&&t.tagName&&(n=t.closest(I)),!n){console.error("Prompt element 'data-root' not found");return}let s=n.querySelector(q);if(!s){console.error("Prompt element 'data-content' not found");return}let i=n.querySelector(K)||n.querySelector("summary"),a=n.querySelector(W),r=n.tagName==="DETAILS",u=n.dataset[U]!==void 0,m=n.dataset[B]!==void 0,l=n.dataset[$]!==void 0,v=n.dataset[j],p={root:n,isDetails:r,isModal:u,isEscapable:m,isFocusFirst:l,focusFirstSelector:v,toggle:i,content:s,touchLayer:a,escapeListener:function(F){F.key==="Escape"&&[].slice.call(document.querySelectorAll(`${I}[data-${y}]`)).reverse()[0]===p.root&&T(p,S(b({},o),{isIgnoreLockDuration:!0}))}};return p}var Q=e=>{let{toggle:t}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async o=>{o.preventDefault(),o.stopPropagation(),g(e)}),t.dataset.registered="")},X=e=>{let{touchLayer:t,isModal:o}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async n=>{n.target===t&&(n.stopPropagation(),o||g(e,1))}),t.dataset.registered="")};async function d(e,t,o,n){let s=J(e.el,t,o);if(s===void 0)return;Q(s),X(s);let{root:i,isDetails:a}=s;a&&i.getAttribute("open")!==null&&n!==1&&L(s,o),n!==void 0&&await g(s,n,o)}var Y={mounted(){d(this)},async init(e,t){await d(this,e,t)},async toggle(e,t){await d(this,e,t,2)},async show(e,t){await d(this,e,t,0)},async hide(e,t){await d(this,e,t,1)}};window.Prompt=Y;})();
