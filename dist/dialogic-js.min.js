"use strict";(()=>{var N=Object.defineProperty,V=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var H=(t,a,e)=>a in t?N(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,u=(t,a)=>{for(var e in a||(a={}))G.call(a,e)&&H(t,e,a[e]);if(P)for(var e of P(a))B.call(a,e)&&H(t,e,a[e]);return t},h=(t,a)=>V(t,X(a));var L=t=>new Promise(a=>setTimeout(a,t)),q=(t,a)=>a.reduce((e,n)=>e!=="0s"?e:t.getPropertyValue(n),"0s"),x=({domElement:t,props:a})=>{let e=document.defaultView;if(e){let n=e.getComputedStyle(t);if(n)return q(n,a)}},A=t=>{let a=parseFloat(t)*(t.indexOf("ms")===-1?1e3:1);return Number.isNaN(a)?0:a},k=t=>{let a=x({domElement:t,props:["animation-duration","transition-duration"]}),e=a!==void 0?A(a):0,n=x({domElement:t,props:["animation-delay","transition-delay"]}),r=n!==void 0?A(n):0;return e+r},y=t=>t.scrollTop,C=t=>{let a=typeof window<"u"?window.getComputedStyle(t):{};return a.opacity==="0"||a.display==="none"?!1:!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},U=(t,a)=>t instanceof HTMLAnchorElement&&t.rel!=="ignore"||t instanceof HTMLAreaElement&&t.href!==void 0||[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement].some(e=>t instanceof e)&&!t.disabled||t instanceof HTMLIFrameElement||t.tabIndex>0||!a&&t.tabIndex===0&&t.getAttribute("tabindex")!==null&&t.getAttribute("aria-hidden")!=="true",I=t=>[].slice.call(t.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter(e=>U(e,!0)).sort((e,n)=>e.tabIndex-n.tabIndex)[0],R=(t,a,e)=>{a&&(t[a]||(t[a]=JSON.stringify(e)))},_=(t,a)=>{if(a)return JSON.parse(t[a])},v=(t,a)=>{a&&delete t[a]},F=(t,a)=>{!a||!t||Object.keys(t).forEach(e=>{a.dataset[e]=t[e]})};var z="[data-prompt]",K="[data-content]",W="[data-touch]",$="[data-backdrop]",J="[data-toggle]",j="ismodal",Y="isescapable",Q="isfocusfirst",Z="focusfirst",O="isopen",T="islocked",tt=300,b={isOpen:!1,willShow:!1,didShow:!1,willHide:!1,didHide:!1},S=async(t,a={})=>{var m,c,f,w;let{prompt:e,content:n,root:r,isDetails:s,isEscapable:i,escapeListener:p}=t;if(r.dataset[T]!==void 0&&!a.isIgnoreLockDuration)return;e.status=h(u({},b),{isOpen:!0,willHide:!0}),(m=a.willHide)==null||m.call(a,t),(c=a.getStatus)==null||c.call(a,e.status),delete r.dataset[O];let d=k(n);await L(d),s&&r.removeAttribute("open"),n.tagName=="DIALOG"&&(n.close(),y(n)),e.status=h(u({},b),{didHide:!0}),(f=a.getStatus)==null||f.call(a,e.status),(w=a.didHide)==null||w.call(a,t),i&&typeof window<"u"&&window.removeEventListener("keydown",p)},D=async(t,a={})=>{var f,w,g,l;let{prompt:e,content:n,root:r,isDetails:s,isEscapable:i,isFocusFirst:p,focusFirstSelector:d,escapeListener:m}=t;if(r.dataset[T]!==void 0)return;r.dataset[T]="",setTimeout(()=>{r&&delete r.dataset[T]},tt),i&&typeof window<"u"&&window.addEventListener("keydown",m),s&&(r.setAttribute("open",""),y(r)),r.dataset[O]="",y(r),e.status=h(u({},b),{willShow:!0}),(f=a.willShow)==null||f.call(a,t),(w=a.getStatus)==null||w.call(a,e.status);let c=k(n);if(await L(c),p){let o=I(n);o&&o.focus()}else if(d){let o=n.querySelector(d);o&&o.focus()}e.status=h(u({},b),{didShow:!0,isOpen:!0}),(g=a.didShow)==null||g.call(a,t),(l=a.getStatus)==null||l.call(a,e.status)},M=async(t,a=2,e)=>{switch(a){case 0:return await D(t,e);case 1:return await S(t,e);default:return C(t.content)?await S(t,e):await D(t,e)}},at=(t,a,e,n)=>{let r=null;if(!e&&a?r=a:typeof e=="string"?r=document.querySelector(e):e&&e.tagName&&(r=e.closest(z)),!r){console.error("Prompt element 'data-prompt' not found");return}let s=r.querySelector(K);if(!s){console.error("Prompt element 'data-content' not found");return}let i=r.querySelector(J)||r.querySelector("summary"),p=r.querySelector(W),d=r.querySelector($),m=r.tagName==="DETAILS",c=r.dataset[j]!==void 0,f=r.dataset[Y]!==void 0,w=r.dataset[Q]!==void 0,g=r.dataset[Z],l={prompt:t,root:r,isDetails:m,isModal:c,isEscapable:f,isFocusFirst:w,focusFirstSelector:g,toggle:i,content:s,touchLayer:p,backdropLayer:d,escapeListener:function(o){o.key==="Escape"&&[].slice.call(document.querySelectorAll("".concat(z,"[data-").concat(O,"]"))).reverse()[0]===l.root&&S(l,h(u({},n),{isIgnoreLockDuration:!0}))},clickTouchLayerListener:function(o){o.target===p&&(c||M(l,1,n))},clickToggleListener:function(o){o.preventDefault(),o.stopPropagation(),M(l,void 0,n)}};return l},et=t=>{let{toggle:a,clickToggleListener:e}=t;a&&a.dataset.registered!==""&&(a.addEventListener("click",e),a.dataset.registered="")},rt=t=>{let{clickTouchLayerListener:a,touchLayer:e}=t;e&&e.dataset.registered!==""&&(e.addEventListener("click",a),e.dataset.registered="")};async function E(t,a,e,n){t.options=u(u({},t.options),e);let r=at(t,t.el,a,t.options);if(r===void 0)return;t.el||(t.el=r==null?void 0:r.root);let{root:s,content:i,isDetails:p,backdropLayer:d}=r;e!=null&&e.transitionDuration&&(i.style.setProperty("--prompt-transition-duration-content","".concat(e.transitionDuration,"ms")),i.style.setProperty("--prompt-fast-transition-duration-content","".concat(e.transitionDuration,"ms")),d&&(d.style.setProperty("--prompt-transition-duration-backdrop","".concat(e.transitionDuration,"ms")),d.style.setProperty("--prompt-fast-transition-duration-backdrop","".concat(e.transitionDuration,"ms")))),i.tagName=="DIALOG"&&(i.show(),y(i)),et(r),rt(r),p&&s.getAttribute("open")!==null&&n!==1&&D(r,t.options),n!==void 0&&await M(r,n,t.options)}var nt={_cache:{},mounted(){},beforeUpdate(){var t,a;R(this._cache,(t=this.el)==null?void 0:t.id,(a=this.el)==null?void 0:a.dataset)},updated(){var a,e;let t=_(this._cache,(a=this.el)==null?void 0:a.id);F(t,this.el),v(this._cache,(e=this.el)==null?void 0:e.id)},destroyed(){var t;v(this._cache,(t=this.el)==null?void 0:t.id)},status:b,async init(t,a){await E(this,t,a)},async toggle(t,a){await E(this,t,a,2)},async show(t,a){await E(this,t,a,0)},async hide(t,a){await E(this,t,a,1)}};typeof window<"u"&&(window.Prompt=nt);})();
