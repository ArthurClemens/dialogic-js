"use strict";(()=>{var G=Object.defineProperty,q=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var D=(e,t,n)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a=(e,t)=>{for(var n in t||(t={}))W.call(t,n)&&D(e,n,t[n]);if(O)for(var n of O(t))K.call(t,n)&&D(e,n,t[n]);return e},p=(e,t)=>q(e,U(t));var g=e=>new Promise(t=>setTimeout(t,e)),B=(e,t)=>t.reduce((n,s)=>n!=="0s"?n:e.getPropertyValue(s),"0s"),C=({domElement:e,props:t})=>{let n=document.defaultView;if(n){let s=n.getComputedStyle(e);if(s)return B(s,t)}},A=e=>{let t=parseFloat(e)*(e.indexOf("ms")===-1?1e3:1);return Number.isNaN(t)?0:t},S=e=>{let t=C({domElement:e,props:["animation-duration","transition-duration"]}),n=t!==void 0?A(t):0,s=C({domElement:e,props:["animation-delay","transition-delay"]}),o=s!==void 0?A(s):0;return n+o},I=e=>e.scrollTop,v=e=>{let t=typeof window<"u"?window.getComputedStyle(e):{};return t.opacity==="0"||t.display==="none"?!1:!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},J=(e,t)=>e instanceof HTMLAnchorElement&&e.rel!=="ignore"||e instanceof HTMLAreaElement&&e.href!==void 0||[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement].some(n=>e instanceof n)&&!e.disabled||e instanceof HTMLIFrameElement||e.tabIndex>0||!t&&e.tabIndex===0&&e.getAttribute("tabindex")!==null&&e.getAttribute("aria-hidden")!=="true",P=e=>[].slice.call(e.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter(n=>J(n,!0)).sort((n,s)=>n.tabIndex-s.tabIndex)[0],_=(e,t,n)=>{t&&(e[t]||(e[t]=JSON.stringify(n)))},x=(e,t)=>{if(t)return JSON.parse(e[t])},w=(e,t)=>{t&&delete e[t]},F=(e,t)=>{!t||!e||Object.keys(e).forEach(n=>{t.dataset[n]=e[n]})};var k="[data-prompt]",$="[data-content]",j="[data-touch]",z="[data-toggle]",Q="ismodal",X="isescapable",Y="isfocusfirst",Z="focusfirst",M="isopen",V="isshowing",N="ishiding",y="islocked",ee=300,m={isOpen:!1,willShow:!1,didShow:!1,willHide:!1,didHide:!1},h=async(e,t={})=>{let{prompt:n,content:s,root:o,isDetails:i,isEscapable:r,escapeListener:d}=e;if(o.dataset[y]!==void 0&&!t.isIgnoreLockDuration)return;n.status=p(a({},m),{isOpen:!0,willHide:!0}),t.willHide&&t.willHide(e),delete o.dataset[V],o.dataset[N]="";let u=S(s);await g(u),i&&o.removeAttribute("open"),delete o.dataset[N],delete o.dataset[M],n.status=p(a({},m),{didHide:!0}),t.didHide&&t.didHide(e),r&&typeof window<"u"&&window.removeEventListener("keydown",d)},H=async(e,t={})=>{let{prompt:n,content:s,root:o,isDetails:i,isEscapable:r,isFocusFirst:d,focusFirstSelector:u,escapeListener:E}=e;if(o.dataset[y]!==void 0)return;o.dataset[y]="",setTimeout(()=>{o&&delete o.dataset[y]},ee),r&&typeof window<"u"&&window.addEventListener("keydown",E),i&&o.setAttribute("open",""),o.dataset[M]="",I(o),o.dataset[V]="",n.status=p(a({},m),{willShow:!0}),t.willShow&&t.willShow(e);let L=S(s);if(await g(L),d){let l=P(s);l&&l.focus()}else if(u){let l=s.querySelector(u);l&&l.focus()}n.status=p(a({},m),{didShow:!0,isOpen:!0}),t.didShow&&t.didShow(e)},b=async(e,t=2,n)=>{switch(t){case 0:return await H(e,n);case 1:return await h(e,n);default:return v(e.content)?await h(e,n):await H(e,n)}},te=(e,t,n,s)=>{let o=null;if(!n&&t?o=t:typeof n=="string"?o=document.querySelector(n):n&&n.tagName&&(o=n.closest(k)),!o){console.error("Prompt element 'data-root' not found");return}let i=o.querySelector($);if(!i){console.error("Prompt element 'data-content' not found");return}let r=o.querySelector(z)||o.querySelector("summary"),d=o.querySelector(j),u=o.tagName==="DETAILS",E=o.dataset[Q]!==void 0,L=o.dataset[X]!==void 0,l=o.dataset[Y]!==void 0,R=o.dataset[Z],f={prompt:e,root:o,isDetails:u,isModal:E,isEscapable:L,isFocusFirst:l,focusFirstSelector:R,toggle:r,content:i,touchLayer:d,escapeListener:function(c){c.key==="Escape"&&[].slice.call(document.querySelectorAll(`${k}[data-${M}]`)).reverse()[0]===f.root&&h(f,p(a({},s),{isIgnoreLockDuration:!0}))},clickTouchLayerListener:function(c){c.target===d&&(c.stopPropagation(),E||b(f,1,s))},clickToggleListener:function(c){c.preventDefault(),c.stopPropagation(),b(f,void 0,s)}};return f},ne=e=>{let{toggle:t,clickToggleListener:n}=e;t&&t.dataset.registered!==""&&(t.addEventListener("click",n),t.dataset.registered="")},oe=e=>{let{clickTouchLayerListener:t,touchLayer:n}=e;n&&n.dataset.registered!==""&&(n.addEventListener("click",t),n.dataset.registered="")};async function T(e,t,n,s){e.options=a(a({},e.options),n);let o=te(e,e.el,t,e.options);if(o===void 0)return;e.el||(e.el=o==null?void 0:o.root),ne(o),oe(o);let{root:i,isDetails:r}=o;r&&i.getAttribute("open")!==null&&s!==1&&H(o,e.options),s!==void 0&&await b(o,s,e.options)}var se={_cache:{},mounted(){},beforeUpdate(){var e,t;_(this._cache,(e=this.el)==null?void 0:e.id,(t=this.el)==null?void 0:t.dataset)},updated(){var t,n;let e=x(this._cache,(t=this.el)==null?void 0:t.id);F(e,this.el),w(this._cache,(n=this.el)==null?void 0:n.id)},destroyed(){var e;w(this._cache,(e=this.el)==null?void 0:e.id)},getStatus(){return this.status},status:m,async init(e,t){await T(this,e,t)},async toggle(e,t){await T(this,e,t,2)},async show(e,t){await T(this,e,t,0)},async hide(e,t){await T(this,e,t,1)}};typeof window<"u"&&(window.Prompt=se);})();
