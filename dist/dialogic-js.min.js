"use strict";(()=>{var m=e=>new Promise(t=>setTimeout(t,e)),D=(e,t)=>t.reduce((n,o)=>n!=="0s"?n:e.getPropertyValue(o),"0s"),L=({domElement:e,props:t})=>{let n=document.defaultView;if(n){let o=n.getComputedStyle(e);if(o)return D(o,t)}},g=e=>{let t=parseFloat(e)*(e.indexOf("ms")===-1?1e3:1);return Number.isNaN(t)?0:t},E=e=>{let t=L({domElement:e,props:["animation-duration","transition-duration"]}),n=t!==void 0?g(t):0,o=L({domElement:e,props:["animation-delay","transition-delay"]}),i=o!==void 0?g(o):0;return n+i},H=e=>e.scrollTop,M=e=>{let t=window.getComputedStyle(e);return t.opacity==="0"||t.display==="none"?!1:!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},P=(e,t)=>e instanceof HTMLAnchorElement&&e.rel!=="ignore"||e instanceof HTMLAreaElement&&e.href!==void 0||[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement].some(n=>e instanceof n)&&!e.disabled||e instanceof HTMLIFrameElement||e.tabIndex>0||!t&&e.tabIndex===0&&e.getAttribute("tabindex")!==null&&e.getAttribute("aria-hidden")!=="true",b=e=>[].slice.call(e.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter(n=>P(n,!0)).sort((n,o)=>n.tabIndex-o.tabIndex)[0];var A="[data-prompt]",C="[data-content]",I="[data-touch]",v="[data-toggle]",x="ismodal",_="isescapable",F="isfocusfirst",O="isopen",S="isshowing",w="ishiding",c="islocked",V=300,p=async(e,t={})=>{let{content:n,root:o,isDetails:i}=e;if(o.dataset[c]!==void 0)return;t.willHide&&t.willHide(e),delete o.dataset[S],o.dataset[w]="";let s=E(n);await m(s),i&&o.removeAttribute("open"),delete o.dataset[w],delete o.dataset[O],t.didHide&&t.didHide(e)},f=async(e,t={})=>{let{content:n,root:o,isDetails:i,isEscapable:s,isFocusFirst:a,escapeListener:d}=e;if(o.dataset[c]!==void 0)return;t.willShow&&t.willShow(e),o.dataset[c]="",setTimeout(()=>{o&&delete o.dataset[c]},V),s&&window.addEventListener("keydown",d,{once:!0}),i&&o.setAttribute("open",""),o.dataset[O]="",H(o),o.dataset[S]="";let u=E(n);if(await m(u),a){let l=b(n);l&&l.focus()}t.didShow&&t.didShow(e)},T=async(e,t=2,n)=>{switch(t){case 0:return await f(e,n);case 1:return await p(e,n);default:return M(e.content)?await p(e,n):await f(e,n)}};function N(e,t){let n=null;if(!t&&e?n=e:typeof t=="string"?n=document.querySelector(t):t&&!!t.tagName&&(n=t.closest(A)),!n){console.error("Prompt element 'data-root' not found");return}let o=n.querySelector(C);if(!o){console.error("Prompt element 'data-content' not found");return}let i=n.querySelector(v)||n.querySelector("summary"),s=n.querySelector(I),a=n.tagName==="DETAILS",d=n.dataset[x]!==void 0,u=n.dataset[_]!==void 0,l=n.dataset[F]!==void 0,y={root:n,isDetails:a,isModal:d,isEscapable:u,isFocusFirst:l,toggle:i,content:o,touchLayer:s,escapeListener:function(h){h.key==="Escape"&&p(y)}};return y}var G=e=>{let{toggle:t}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async n=>{n.preventDefault(),n.stopPropagation(),T(e)}),t.dataset.registered="")},R=e=>{let{touchLayer:t,isModal:n}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async o=>{o.stopPropagation(),n||T(e,1)}),t.dataset.registered="")},k=e=>{let{content:t}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async n=>{n.stopPropagation()}),t.dataset.registered="")};async function r(e,t,n,o){let i=N(e.el,t);if(i===void 0)return;G(i),R(i),k(i);let{root:s,isDetails:a}=i;a&&s.getAttribute("open")!==null&&o!==1&&f(i,n),o!==void 0&&await T(i,o,n)}var q={mounted(){r(this)},async init(e,t){await r(this,e,t)},async toggle(e,t){await r(this,e,t,2)},async show(e,t){await r(this,e,t,0)},async hide(e,t){await r(this,e,t,1)}};window.Prompt=q;})();
