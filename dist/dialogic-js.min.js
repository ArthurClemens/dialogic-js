"use strict";(()=>{var E=e=>new Promise(t=>setTimeout(t,e)),A=(e,t)=>t.reduce((n,o)=>n!=="0s"?n:e.getPropertyValue(o),"0s"),g=({domElement:e,props:t})=>{let n=document.defaultView;if(n){let o=n.getComputedStyle(e);if(o)return A(o,t)}},H=e=>{let t=parseFloat(e)*(e.indexOf("ms")===-1?1e3:1);return Number.isNaN(t)?0:t},f=e=>{let t=g({domElement:e,props:["animation-duration","transition-duration"]}),n=t!==void 0?H(t):0,o=g({domElement:e,props:["animation-delay","transition-delay"]}),s=o!==void 0?H(o):0;return n+s},M=e=>e.scrollTop,b=e=>{let t=window.getComputedStyle(e);return t.opacity==="0"||t.display==="none"?!1:!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},P=(e,t)=>e instanceof HTMLAnchorElement&&e.rel!=="ignore"||e instanceof HTMLAreaElement&&e.href!==void 0||[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement].some(n=>e instanceof n)&&!e.disabled||e instanceof HTMLIFrameElement||e.tabIndex>0||!t&&e.tabIndex===0&&e.getAttribute("tabindex")!==null&&e.getAttribute("aria-hidden")!=="true",S=e=>[].slice.call(e.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter(n=>P(n,!0)).sort((n,o)=>n.tabIndex-o.tabIndex)[0];var C="[data-prompt]",I="[data-content]",v="[data-touch]",F="[data-toggle]",_="ismodal",x="isescapable",V="isfocusfirst",N="focusfirst",w="isopen",h="isshowing",O="ishiding",c="islocked",G=300,p=async(e,t={})=>{let{content:n,root:o,isDetails:s}=e;if(o.dataset[c]!==void 0)return;t.willHide&&t.willHide(e),delete o.dataset[h],o.dataset[O]="";let i=f(n);await E(i),s&&o.removeAttribute("open"),delete o.dataset[O],delete o.dataset[w],t.didHide&&t.didHide(e)},T=async(e,t={})=>{let{content:n,root:o,isDetails:s,isEscapable:i,isFocusFirst:r,focusFirstSelector:d,escapeListener:u}=e;if(o.dataset[c]!==void 0)return;t.willShow&&t.willShow(e),o.dataset[c]="",setTimeout(()=>{o&&delete o.dataset[c]},G),i&&window.addEventListener("keydown",u,{once:!0}),s&&o.setAttribute("open",""),o.dataset[w]="",M(o),o.dataset[h]="";let m=f(n);if(await E(m),r){let a=S(n);a&&a.focus()}else if(d){let a=n.querySelector(d);a&&a.focus()}t.didShow&&t.didShow(e)},y=async(e,t=2,n)=>{switch(t){case 0:return await T(e,n);case 1:return await p(e,n);default:return b(e.content)?await p(e,n):await T(e,n)}};function R(e,t){let n=null;if(!t&&e?n=e:typeof t=="string"?n=document.querySelector(t):t&&!!t.tagName&&(n=t.closest(C)),!n){console.error("Prompt element 'data-root' not found");return}let o=n.querySelector(I);if(!o){console.error("Prompt element 'data-content' not found");return}let s=n.querySelector(F)||n.querySelector("summary"),i=n.querySelector(v),r=n.tagName==="DETAILS",d=n.dataset[_]!==void 0,u=n.dataset[x]!==void 0,m=n.dataset[V]!==void 0,a=n.dataset[N],L={root:n,isDetails:r,isModal:d,isEscapable:u,isFocusFirst:m,focusFirstSelector:a,toggle:s,content:o,touchLayer:i,escapeListener:function(D){D.key==="Escape"&&p(L)}};return L}var q=e=>{let{toggle:t}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async n=>{n.preventDefault(),n.stopPropagation(),y(e)}),t.dataset.registered="")},k=e=>{let{touchLayer:t,isModal:n}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async o=>{o.stopPropagation(),n||y(e,1)}),t.dataset.registered="")},W=e=>{let{content:t}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async n=>{n.stopPropagation()}),t.dataset.registered="")};async function l(e,t,n,o){let s=R(e.el,t);if(s===void 0)return;q(s),k(s),W(s);let{root:i,isDetails:r}=s;r&&i.getAttribute("open")!==null&&o!==1&&T(s,n),o!==void 0&&await y(s,o,n)}var K={mounted(){l(this)},async init(e,t){await l(this,e,t)},async toggle(e,t){await l(this,e,t,2)},async show(e,t){await l(this,e,t,0)},async hide(e,t){await l(this,e,t,1)}};window.Prompt=K;})();
