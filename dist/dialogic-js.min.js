"use strict";(()=>{var r=e=>new Promise(t=>setTimeout(t,e)),D=(e,t)=>t.reduce((n,o)=>n!=="0s"?n:e.getPropertyValue(o),"0s"),E=({domElement:e,props:t})=>{let n=document.defaultView;if(n){let o=n.getComputedStyle(e);if(o)return D(o,t)}},f=e=>{let t=parseFloat(e)*(e.indexOf("ms")===-1?1e3:1);return Number.isNaN(t)?0:t},d=e=>{let t=E({domElement:e,props:["animation-duration","transition-duration"]}),n=t!==void 0?f(t):0,o=E({domElement:e,props:["animation-delay","transition-delay"]}),a=o!==void 0?f(o):0;return n+a},y=e=>e.scrollTop,g=e=>{let t=window.getComputedStyle(e);return t.opacity==="0"||t.display==="none"?!1:!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)};var O="[data-prompt]",P="[data-content]",b="[data-touch]",h="[data-toggle]",C="ismodal",v="isescapable",L="isopen",w="isshowing",T="ishiding";var l=async({content:e,root:t,isDetails:n,isEscapable:o,escapeListener:a})=>{o&&window.addEventListener("keydown",a,{once:!0}),delete t.dataset[w],t.dataset[T]="";let i=d(e);await r(i),n&&t.removeAttribute("open"),delete t.dataset[T],delete t.dataset[L]},c=async({content:e,root:t,isDetails:n,isEscapable:o,escapeListener:a})=>{o&&window.addEventListener("keydown",a,{once:!0}),n&&t.setAttribute("open",""),t.dataset[L]="",y(t),t.dataset[w]="";let i=d(e);await r(i)},u=async(e,t=2)=>{switch(t){case 0:return await c(e);case 1:return await l(e);default:return g(e.content)?await l(e):await c(e)}};function A(e,t){let n=null;if(!t&&e?n=e:typeof t=="string"?n=document.querySelector(t):t&&!!t.tagName&&(n=t.closest(O)),!n){console.error("Prompt element 'data-root' not found");return}let o=n.querySelector(P);if(!o){console.error("Prompt element 'data-content' not found");return}let a=n.querySelector(h)||n.querySelector("summary"),i=n.querySelector(b),m=n.tagName==="DETAILS",M=n.dataset[C]!==void 0,H=n.dataset[v]!==void 0,p={root:n,isDetails:m,isModal:M,isEscapable:H,toggle:a,content:o,touchLayer:i,escapeListener:function(S){S.key==="Escape"&&l(p)}};return p}var V=e=>{let{toggle:t}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async n=>{n.preventDefault(),n.stopPropagation(),u(e)}),t.dataset.registered="")},_=e=>{let{touchLayer:t,isModal:n}=e;t&&t.dataset.registered===void 0&&(t.addEventListener("click",async o=>{o.preventDefault(),o.stopPropagation(),n||u(e,1)}),t.dataset.registered="")};async function s(e,t,n){let o=A(e.el,t);if(o===void 0)return;V(o),_(o);let{root:a,isDetails:i}=o;i&&a.getAttribute("open")!==null&&c(o),n!==void 0&&await u(o,n)}var I={mounted(){s(this)},async init(e){await s(this,e)},async toggle(e){await s(this,e,2)},async show(e){await s(this,e,0)},async hide(e){await s(this,e,1)}};window.Prompt=I;})();
